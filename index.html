<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Favourite Movie - Dynamic Page</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome (for icons, e.g., in Contact form) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Internal CSS (Styling from previous version, adapted for better design) -->
    <style>
        body {
            /* Hawaiian soft blue + ocean gradient wallpaper */
            background: linear-gradient(135deg, #87CEFA, #B0E0E6, #E0FFFF);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
        }

        .movie-card {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .movie-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
        }

        .movie-poster {
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0,0,0,0.2);
            /* Memastikan poster mengisi ruang tetapi mengekalkan nisbah aspek */
            object-fit: cover; 
            height: 450px; /* Ketinggian tetap untuk konsistensi dalam grid */
            width: 100%;
        }

        .synopsis {
            font-style: italic;
            color: #555;
        }

        footer {
            margin-top: 30px;
            padding: 15px;
            background: #4682B4; /* ocean blue */
            color: white;
            text-align: center;
            border-radius: 8px;
        }
        
        /* ------------------------------------------------ */
        /* PERUBAHAN UTAMA: Carousel Responsif Penuh */
        /* ------------------------------------------------ */
        .carousel-item {
            /* Tetapkan ketinggian bekas Carousel untuk mengawal ruang */
            max-height: 400px; /* Ketinggian maksimum untuk desktop */
            overflow: hidden; /* Sembunyikan jika ada lebihan, tetapi imej sepatutnya muat */
        }
        
        .carousel-item img {
            /* Penting: Pastikan imej dimuatkan sepenuhnya dalam bekas */
            width: 100%;
            height: 100%;
            /* Gunakan 'contain' supaya keseluruhan imej dipaparkan tanpa dipotong. */
            object-fit: contain; 
            border-radius: 10px;
            /* Latar belakang untuk mengisi ruang yang mungkin ditinggalkan oleh 'contain' */
            background-color: #000; 
        }

        /* Media Query: Kurangkan ketinggian Carousel pada peranti mudah alih (max-width: 768px) */
        @media (max-width: 768px) {
            .carousel-item {
                max-height: 250px; /* Ketinggian visual yang lebih sesuai pada telefon bimbit */
            }
        }
        /* ------------------------------------------------ */
        /* Akhir PERUBAHAN UTAMA */
        /* ------------------------------------------------ */

        /* Style for the new Lilo & Stitch info section */
        .details-grid div {
            padding-top: 5px;
            padding-bottom: 5px;
            font-size: 1.05rem;
        }
        
        /* WARNA BIRU PAUTAN NAVIGASI (Dikekalkan) */
        .navbar-dark .navbar-nav .nav-link:active,
        .navbar-dark .navbar-nav .nav-link.active,
        .navbar-dark .navbar-nav .nav-link:focus,
        .navbar-dark .navbar-nav .nav-link:hover {
            /* Warna Biru Pilihan Apabila Ditekan/Aktif */
            color: #1E90FF !important; /* Biru terang */
            font-weight: bold;
        }

    </style>
</head>
<body>

<!-- 1. Navbar (Responsive) -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow">
    <div class="container">
        <a class="navbar-brand fw-bold" href="#">ðŸŽ¥ Movie App</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto" id="main-navbar-links">
                <!-- Tambah kelas 'nav-item-link' untuk JavaScript menguruskan kelas aktif -->
                <li class="nav-item">
                    <a class="nav-link nav-item-link active" aria-current="page" href="#" data-section="home">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-item-link" href="#movie-info" data-section="lilo-stitch">Lilo & Stitch</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-item-link" href="#movie-list" data-section="movies">Movies</a>
                </li>
                <li class="nav-item">
                    <!-- Trigger Contact Us Modal -->
                    <button type="button" class="btn btn-outline-light btn-sm mt-1" data-bs-toggle="modal" data-bs-target="#contactModal">
                        Contact Us
                    </button>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Bootstrap Container -->
<div class="container mt-5">
    
    <h2 class="text-center text-dark mb-4">Discover Your Next Favourite Movie</h2>

    <!-- 1. Carousel (Responsive Images) -->
    <div id="movieGallery" class="carousel slide mb-5 shadow-lg" data-bs-ride="carousel">
        <div class="carousel-inner">
            <!-- Saiz 1200x400 dalam URL picsum.photos hanya menetapkan saiz imej yang diambil, 
                 tetapi kelas .d-block .w-100 dan CSS object-fit mengawal paparan sebenar -->
            <div class="carousel-item active">
                <!-- Kunci: img src masih menggunakan 1200x400, tetapi CSS object-fit: contain memuatkan seluruh imej -->
                <img src="images/lioo.jpg" class="d-block w-100" alt="Lilo & Stitch Scene">
                <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded-lg p-2">
                    <h5>Lilo & Stitch</h5>
                    <p>Experience the magic of 'Ohana.</p>
                </div>
            </div>
            <!-- Img 2 -->
            <div class="carousel-item">
                <img src="images/action.jpg" class="d-block w-100" alt="Action Movie Highlight">
                <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded-lg p-2">
                    <h5>Action Highlight</h5>
                    <p>Adrenaline-pumping excitement.</p>
                </div>
            </div>
            <!-- Img 3 -->
            <div class="carousel-item">
                <img src="images/comedy.jpg">
                <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded-lg p-2">
                    <h5>Comedy Night</h5>
                    <p>Laughter guaranteed!</p>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#movieGallery" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#movieGallery" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <!-- NEW SECTION: Lilo & Stitch Dedicated Info -->
    <h2 class="text-center text-dark mb-4" id="movie-info">Lilo & Stitch (Live Action)</h2>
    <div id="lilo-stitch-info" class="mb-5 p-4 p-md-5 bg-light rounded-3 shadow-lg border border-primary">
        <!-- Movie details will be dynamically injected here by JavaScript -->
    </div>
    <!-- END NEW SECTION -->

    <!-- 2. Dynamic Movie List Generation -->
    <h2 class="text-center text-dark mb-4" id="movie-list">Featured Movies</h2>
    <div class="row row-cols-1 row-cols-md-3 g-4" id="dynamic-movie-container">
        <!-- Movie cards will be inserted here by JavaScript -->
    </div>

    <!-- Footer -->
    <footer>
        Â© 2025 Movie Web App | Dynamic Content Showcase
    </footer>
</div>

<!-- 3. Modal-based "Contact Us" Form -->
<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-dark text-white">
                <h5 class="modal-title" id="contactModalLabel"><i class="fas fa-envelope me-2"></i> Contact Us</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="contactForm">
                    <!-- Name Field -->
                    <div class="mb-3">
                        <label for="contactName" class="form-label">Name:</label>
                        <input type="text" class="form-control" id="contactName" placeholder="Your Name">
                        <div class="invalid-feedback" id="nameError"></div>
                    </div>
                    <!-- Email Field -->
                    <div class="mb-3">
                        <label for="contactEmail" class="form-label">Email:</label>
                        <input type="email" class="form-control" id="contactEmail" placeholder="name@example.com">
                        <div class="invalid-feedback" id="emailError"></div>
                    </div>
                    <!-- Message Field -->
                    <div class="mb-3">
                        <label for="contactMessage" class="form-label">Message:</label>
                        <textarea class="form-control" id="contactMessage" rows="3" placeholder="Your message"></textarea>
                        <div class="invalid-feedback" id="messageError"></div>
                    </div>
                    
                    <!-- 4. Ethical Consent Checkbox (Mandatory) -->
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="ethicalConsent">
                        <label class="form-check-label text-sm" for="ethicalConsent">
                            I consent to the ethical use of my submitted information and acknowledge the privacy policy.
                        </label>
                        <div class="invalid-feedback d-block hidden" id="consentError" style="display:none;">
                            You must check this box to proceed.
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary w-100">Send Message</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS (includes Popper for tooltips/popovers) & jQuery for mobile compatibility (optional) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Include jQuery for Popovers/Tooltips/Transitions (if needed for older Bootstrap/mobile features) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Optional: jQuery Mobile is deprecated and heavy. Using Bootstrap 5 transitions instead. -->

<script>
    // 2. JavaScript Array for Dynamic Movie Data
    const movies = [
        {
            title: "LILO & STITCH (Live Action)",
            director: "Dean Fleischer Camp",
            release: "May 23, 2025",
            synopsis: "Experience this wildly funny and touching live-action reimagining of Disney's beloved animated classic. When a lonely girl named Lilo adopts Stitch, a rambunctious alien puppy, Stitch helps to mend Lilo's broken family -- but not without wreaking hilarious havoc and mischievous fun on the Hawaiian Islands.",
            cast: ["Maia Kealoha", "Sydney Agudong", "Chris Sanders"],
            // Anda boleh menukar URL ini kepada imej yang anda mahu
            poster: "images/lilo.webp", 
            imdbLink: "https://www.imdb.com/title/tt11655566/"
        },
        {
            title: "DUNE: PART TWO",
            director: "Denis Villeneuve",
            release: "March 1, 2024",
            synopsis: "Paul Atreides unites with Chani and the Fremen while seeking revenge against the conspirators who destroyed his family. Facing a choice between the love of his life and the fate of the universe, he endeavors to prevent a terrible future only he can foresee.",
            cast: ["TimothÃ©e Chalamet", "Zendaya", "Rebecca Ferguson"],
            // Anda boleh menukar URL ini kepada imej yang anda mahu
            poster: "images/dune.jpg",
            imdbLink: "https://www.imdb.com/title/tt15239678/"
        },
        {
            title: "INSIDE OUT 2",
            director: "Kelsey Mann",
            release: "June 14, 2024",
            synopsis: "Follows the story of Riley, who is now a teenager. Headquarters is undergoing a sudden demolition to make room for something entirely unexpected: new Emotions! Joy, Sadness, Anger, Fear and Disgust aren't sure how to feel when Anxiety shows up.",
            cast: ["Amy Poehler", "Maya Hawke", "Kensington Tallman"],
            // Anda boleh menukar URL ini kepada imej yang anda mahu
            poster: "images/inside out.webp",
            imdbLink: "https://www.imdb.com/title/tt22080338/"
        }
    ];

    const movieContainer = document.getElementById('dynamic-movie-container');

    // NEW FUNCTION: Render the dedicated Lilo & Stitch section
    function renderLiloStitchInfo() {
        // Assuming Lilo & Stitch is the first movie in the array
        const movie = movies[0]; 

        // Mock data for showtimes since it's not in the array
        const showTimes = "10:00 AM, 1:30 PM, 4:45 PM, 7:50 PM"; 

        const infoHtml = `
            <div class="row align-items-center">
                <!-- Movie Poster -->
                <div class="col-md-4 mb-4 mb-md-0 text-center">
                    <img src="${movie.poster}" class="img-fluid rounded-3 shadow" 
                         alt="${movie.title} Poster" 
                         style="max-height: 400px; object-fit: cover;">
                </div>
                
                <!-- Movie Details -->
                <div class="col-md-8">
                    <p class="lead text-dark fw-bold mb-3">
                        <i class="fas fa-info-circle me-2 text-primary"></i> About The Movie:
                    </p>
                    <p class="mb-4">${movie.synopsis}</p>

                    <div class="row mt-4 details-grid">
                        <div class="col-sm-6 mb-2">
                            <i class="fas fa-video me-2 text-info"></i>
                            <span class="fw-bold">Directed by:</span> ${movie.director}
                        </div>
                        <div class="col-sm-6 mb-2">
                            <i class="fas fa-calendar-alt me-2 text-info"></i>
                            <span class="fw-bold">Release Date:</span> ${movie.release}
                        </div>
                        <div class="col-sm-6 mb-2">
                            <i class="fas fa-ticket-alt me-2 text-info"></i>
                            <span class="fw-bold">Show Times:</span> <span class="badge bg-success">${showTimes}</span>
                        </div>
                        <div class="col-sm-12 mb-2">
                            <i class="fas fa-users me-2 text-info"></i>
                            <span class="fw-bold">Cast:</span> ${movie.cast.join(', ')}
                        </div>
                    </div>

                    <a href="${movie.imdbLink}" target="_blank" class="btn btn-danger btn-lg mt-3">
                        <i class="fab fa-imdb me-2"></i> View Full Details on IMDb
                    </a>
                </div>
            </div>
        `;

        document.getElementById('lilo-stitch-info').innerHTML = infoHtml;
    }


    // Function to generate movie cards
    function generateMovieCards() {
        movieContainer.innerHTML = ''; // Clear existing content

        // NOTE: Starting from index 1 to skip Lilo & Stitch since it has its own section now
        movies.slice(1).forEach((movie, index) => { 
            const castList = movie.cast.join(', ');
            
            // Menggunakan properti 'poster' secara langsung, tanpa menjana nombor rawak
            const posterUrl = movie.poster; 
            
            const cardHtml = `
                <div class="col">
                    <div class="card h-100 movie-card border-0">
                        <img src="${posterUrl}" class="card-img-top movie-poster" alt="${movie.title} Poster" onerror="this.onerror=null; this.src='https://placehold.co/300x450/808080/ffffff?text=Image+Not+Found'">
                        <div class="card-body">
                            <h5 class="card-title text-primary fw-bold">${movie.title}</h5>
                            <p class="card-text mb-2 text-muted">Directed by: ${movie.director}</p>
                            
                            <!-- 5. Tooltip for Release Date -->
                            <p class="card-text">
                                Release Date: 
                                <span class="badge bg-secondary" 
                                      data-bs-toggle="tooltip" 
                                      data-bs-placement="top" 
                                      data-bs-title="Date the movie officially hit theaters">
                                    ${movie.release}
                                </span>
                            </p>
                            
                            <!-- 5. Popover for Cast -->
                            <p class="card-text synopsis">${movie.synopsis.substring(0, 100)}...</p>
                            <button type="button" class="btn btn-sm btn-outline-info" 
                                    data-bs-toggle="popover" 
                                    data-bs-placement="bottom" 
                                    data-bs-custom-class="custom-popover"
                                    data-bs-title="Main Cast"
                                    data-bs-content="${castList}">
                                Show Cast
                            </button>
                            
                        </div>
                        <div class="card-footer bg-white border-0 pt-0">
                            <a href="${movie.imdbLink}" target="_blank" class="btn btn-danger btn-sm w-100">View on IMDb</a>
                        </div>
                    </div>
                </div>
            `;
            movieContainer.innerHTML += cardHtml;
        });
    }
    
    // --- 3. & 4. Contact Form Validation ---
    const contactForm = document.getElementById('contactForm');
    const consentCheckbox = document.getElementById('ethicalConsent');
    const consentError = document.getElementById('consentError');

    function validateContactForm(event) {
        event.preventDefault(); // Stop default submission
        let isValid = true;

        // Helper function for field validation
        function validateField(fieldId, errorId, message) {
            const field = document.getElementById(fieldId);
            const error = document.getElementById(errorId);
            if (field.value.trim() === '') {
                field.classList.add('is-invalid');
                error.textContent = message;
                isValid = false;
            } else {
                field.classList.remove('is-invalid');
                field.classList.add('is-valid');
            }
        }
        
        // Custom Email Validation
        function validateEmail() {
            const field = document.getElementById('contactEmail');
            const error = document.getElementById('emailError');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (field.value.trim() === '') {
                field.classList.add('is-invalid');
                error.textContent = 'Email is required.';
                isValid = false;
            } else if (!emailRegex.test(field.value.trim())) {
                field.classList.add('is-invalid');
                error.textContent = 'Please enter a valid email address.';
                isValid = false;
            } else {
                field.classList.remove('is-invalid');
                field.classList.add('is-valid');
            }
        }

        // Run all validations
        validateField('contactName', 'nameError', 'Name is required.');
        validateEmail();
        validateField('contactMessage', 'messageError', 'Message is required.');
        
        // 4. Mandatory Ethical Consent Checkbox Validation
        if (!consentCheckbox.checked) {
            consentCheckbox.classList.add('is-invalid');
            consentError.style.display = 'block';
            isValid = false;
        } else {
            consentCheckbox.classList.remove('is-invalid');
            consentError.style.display = 'none';
        }

        if (isValid) {
            // Success: Form is valid and consent is given.
            // NOTE: We use a custom modal or message box instead of alert()
            const successMessage = 'Message Sent Successfully (Form Validated)!';
            console.log(successMessage); // Log success
            
            // For a better user experience, we'll just log and reset the form/validation styles.
            // Since we cannot use alert(), this confirms success in the console.
            
            contactForm.reset();
            
            // Reset validation states after submission
            document.querySelectorAll('.is-valid, .is-invalid').forEach(el => {
                el.classList.remove('is-valid', 'is-invalid');
            });

            // Close modal after successful submission
            const contactModal = bootstrap.Modal.getInstance(document.getElementById('contactModal'));
            if (contactModal) contactModal.hide();
        }
    }

    // FUNGSI UNTUK MENGURUS KELAS AKTIF PADA PAUTAN NAVIGASI
    function handleNavLinkClick(event) {
        // Alih keluar kelas 'active' dari semua pautan
        document.querySelectorAll('.nav-item-link').forEach(link => {
            link.classList.remove('active');
        });

        // Tambah kelas 'active' pada pautan yang baru ditekan
        // Kita gunakan 'currentTarget' untuk memastikan kita mendapat elemen pautan (<a>)
        event.currentTarget.classList.add('active');
    }

    // --- Initialization ---

    document.addEventListener('DOMContentLoaded', () => {
        // Generate the dedicated Lilo & Stitch section first
        renderLiloStitchInfo();
        
        // Generate movie cards on load (now starting from index 1)
        generateMovieCards();
        
        // Enable Tooltips and Popovers (Bootstrap 5 requirement)
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
        [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));

        const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]');
        [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl));

        // Attach validation function to the form submission
        contactForm.addEventListener('submit', validateContactForm);

        // Attach click listener to all navigation links to change active state (and thus color)
        document.querySelectorAll('.nav-item-link').forEach(link => {
            link.addEventListener('click', handleNavLinkClick);
        });
    });

</script>

</body>
</html>

